{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/yonggu/WebstormProjects/slate/site/examples/richtext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useMemo, useState } from 'react';\nimport isHotkey from 'is-hotkey';\nimport { Editable, withReact, useSlate, Slate } from 'slate-react';\nimport { Editor, Transforms, createEditor } from 'slate';\nimport { withHistory } from 'slate-history';\nimport { Button, Icon, Toolbar } from '../components';\nvar HOTKEYS = {\n  'mod+b': 'bold',\n  'mod+i': 'italic',\n  'mod+u': 'underline',\n  'mod+`': 'code'\n};\nvar LIST_TYPES = ['numbered-list', 'bulleted-list'];\n\nvar RichTextExample = function RichTextExample() {\n  _s();\n\n  var _useState = useState(initialValue),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var renderElement = useCallback(function (props) {\n    return __jsx(Element, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 46\n      }\n    }));\n  }, []);\n  var renderLeaf = useCallback(function (props) {\n    return __jsx(Leaf, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 43\n      }\n    }));\n  }, []);\n  var editor = useMemo(function () {\n    return withHistory(withReact(createEditor()));\n  }, []);\n  return __jsx(Slate, {\n    editor: editor,\n    value: value,\n    onChange: function onChange(value) {\n      return setValue(value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, __jsx(Toolbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, __jsx(MarkButton, {\n    format: \"bold\",\n    icon: \"format_bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }), __jsx(MarkButton, {\n    format: \"italic\",\n    icon: \"format_italic\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }), __jsx(MarkButton, {\n    format: \"underline\",\n    icon: \"format_underlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }), __jsx(MarkButton, {\n    format: \"code\",\n    icon: \"code\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }), __jsx(BlockButton, {\n    format: \"heading-one\",\n    icon: \"looks_one\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }), __jsx(BlockButton, {\n    format: \"heading-two\",\n    icon: \"looks_two\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }), __jsx(BlockButton, {\n    format: \"block-quote\",\n    icon: \"format_quote\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }), __jsx(BlockButton, {\n    format: \"numbered-list\",\n    icon: \"format_list_numbered\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }), __jsx(BlockButton, {\n    format: \"bulleted-list\",\n    icon: \"format_list_bulleted\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  })), __jsx(Editable, {\n    renderElement: renderElement,\n    renderLeaf: renderLeaf,\n    placeholder: \"Enter some rich text\\u2026\",\n    spellCheck: true,\n    autoFocus: true,\n    onKeyDown: function onKeyDown(event) {\n      for (var hotkey in HOTKEYS) {\n        if (isHotkey(hotkey, event)) {\n          event.preventDefault();\n          var mark = HOTKEYS[hotkey];\n          toggleMark(editor, mark);\n        }\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }));\n};\n\n_s(RichTextExample, \"eGTXoAMSU5Zwxn30ofCLeiwqzhc=\");\n\n_c = RichTextExample;\n\nvar toggleBlock = function toggleBlock(editor, format) {\n  var isActive = isBlockActive(editor, format);\n  var isList = LIST_TYPES.includes(format);\n  Transforms.unwrapNodes(editor, {\n    match: function match(n) {\n      return LIST_TYPES.includes(n.type);\n    },\n    split: true\n  });\n  Transforms.setNodes(editor, {\n    type: isActive ? 'paragraph' : isList ? 'list-item' : format\n  });\n\n  if (!isActive && isList) {\n    var block = {\n      type: format,\n      children: []\n    };\n    Transforms.wrapNodes(editor, block);\n  }\n};\n\nvar toggleMark = function toggleMark(editor, format) {\n  var isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n};\n\nvar isBlockActive = function isBlockActive(editor, format) {\n  var _Editor$nodes = Editor.nodes(editor, {\n    match: function match(n) {\n      return n.type === format;\n    }\n  }),\n      _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n      match = _Editor$nodes2[0];\n\n  return !!match;\n};\n\nvar isMarkActive = function isMarkActive(editor, format) {\n  var marks = Editor.marks(editor);\n  return marks ? marks[format] === true : false;\n};\n\nvar Element = function Element(_ref) {\n  var attributes = _ref.attributes,\n      children = _ref.children,\n      element = _ref.element;\n\n  switch (element.type) {\n    case 'block-quote':\n      return __jsx(\"blockquote\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 14\n        }\n      }), children);\n\n    case 'bulleted-list':\n      return __jsx(\"ul\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 14\n        }\n      }), children);\n\n    case 'heading-one':\n      return __jsx(\"h1\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 14\n        }\n      }), children);\n\n    case 'heading-two':\n      return __jsx(\"h2\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 14\n        }\n      }), children);\n\n    case 'list-item':\n      return __jsx(\"li\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 14\n        }\n      }), children);\n\n    case 'numbered-list':\n      return __jsx(\"ol\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 14\n        }\n      }), children);\n\n    default:\n      return __jsx(\"p\", _extends({}, attributes, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 14\n        }\n      }), children);\n  }\n};\n\n_c2 = Element;\n\nvar Leaf = function Leaf(_ref2) {\n  var attributes = _ref2.attributes,\n      children = _ref2.children,\n      leaf = _ref2.leaf;\n\n  if (leaf.bold) {\n    children = __jsx(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 16\n      }\n    }, children);\n  }\n\n  if (leaf.code) {\n    children = __jsx(\"code\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 16\n      }\n    }, children);\n  }\n\n  if (leaf.italic) {\n    children = __jsx(\"em\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 16\n      }\n    }, children);\n  }\n\n  if (leaf.underline) {\n    children = __jsx(\"u\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 16\n      }\n    }, children);\n  }\n\n  return __jsx(\"span\", _extends({}, attributes, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 10\n    }\n  }), children);\n};\n\n_c3 = Leaf;\n\nvar BlockButton = function BlockButton(_ref3) {\n  _s2();\n\n  var format = _ref3.format,\n      icon = _ref3.icon;\n  var editor = useSlate();\n  return __jsx(Button, {\n    active: isBlockActive(editor, format),\n    onMouseDown: function onMouseDown(event) {\n      event.preventDefault();\n      toggleBlock(editor, format);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }, __jsx(Icon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, icon));\n};\n\n_s2(BlockButton, \"YMFVEh3YGumTkrWAgpqmxHJ20Oc=\", false, function () {\n  return [useSlate];\n});\n\n_c4 = BlockButton;\n\nvar MarkButton = function MarkButton(_ref4) {\n  _s3();\n\n  var format = _ref4.format,\n      icon = _ref4.icon;\n  var editor = useSlate();\n  return __jsx(Button, {\n    active: isMarkActive(editor, format),\n    onMouseDown: function onMouseDown(event) {\n      event.preventDefault();\n      toggleMark(editor, format);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, __jsx(Icon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, icon));\n};\n\n_s3(MarkButton, \"YMFVEh3YGumTkrWAgpqmxHJ20Oc=\", false, function () {\n  return [useSlate];\n});\n\n_c5 = MarkButton;\nvar initialValue = [{\n  type: 'paragraph',\n  children: [{\n    text: 'This is editable '\n  }, {\n    text: 'rich',\n    bold: true\n  }, {\n    text: ' text, '\n  }, {\n    text: 'much',\n    italic: true\n  }, {\n    text: ' better than a '\n  }, {\n    text: '<textarea>',\n    code: true\n  }, {\n    text: '!'\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: \"Since it's rich text, you can do things like turn a selection of text \"\n  }, {\n    text: 'bold',\n    bold: true\n  }, {\n    text: ', or add a semantically rendered block quote in the middle of the page, like this:'\n  }]\n}, {\n  type: 'block-quote',\n  children: [{\n    text: 'A wise quote.'\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: 'Try it out for yourself!'\n  }]\n}];\nexport default RichTextExample;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"RichTextExample\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Leaf\");\n$RefreshReg$(_c4, \"BlockButton\");\n$RefreshReg$(_c5, \"MarkButton\");","map":{"version":3,"sources":["/Users/yonggu/WebstormProjects/slate/site/examples/richtext.tsx"],"names":["React","useCallback","useMemo","useState","isHotkey","Editable","withReact","useSlate","Slate","Editor","Transforms","createEditor","withHistory","Button","Icon","Toolbar","HOTKEYS","LIST_TYPES","RichTextExample","initialValue","value","setValue","renderElement","props","renderLeaf","editor","event","hotkey","preventDefault","mark","toggleMark","toggleBlock","format","isActive","isBlockActive","isList","includes","unwrapNodes","match","n","type","split","setNodes","block","children","wrapNodes","isMarkActive","removeMark","addMark","nodes","marks","Element","attributes","element","Leaf","leaf","bold","code","italic","underline","BlockButton","icon","MarkButton","text"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react'\nimport isHotkey from 'is-hotkey'\nimport { Editable, withReact, useSlate, Slate } from 'slate-react'\nimport { Editor, Transforms, createEditor, Node } from 'slate'\nimport { withHistory } from 'slate-history'\n\nimport { Button, Icon, Toolbar } from '../components'\n\nconst HOTKEYS = {\n  'mod+b': 'bold',\n  'mod+i': 'italic',\n  'mod+u': 'underline',\n  'mod+`': 'code',\n}\n\nconst LIST_TYPES = ['numbered-list', 'bulleted-list']\n\nconst RichTextExample = () => {\n  const [value, setValue] = useState<Node[]>(initialValue)\n  const renderElement = useCallback(props => <Element {...props} />, [])\n  const renderLeaf = useCallback(props => <Leaf {...props} />, [])\n  const editor = useMemo(() => withHistory(withReact(createEditor())), [])\n\n  return (\n    <Slate editor={editor} value={value} onChange={value => setValue(value)}>\n      <Toolbar>\n        <MarkButton format=\"bold\" icon=\"format_bold\" />\n        <MarkButton format=\"italic\" icon=\"format_italic\" />\n        <MarkButton format=\"underline\" icon=\"format_underlined\" />\n        <MarkButton format=\"code\" icon=\"code\" />\n        <BlockButton format=\"heading-one\" icon=\"looks_one\" />\n        <BlockButton format=\"heading-two\" icon=\"looks_two\" />\n        <BlockButton format=\"block-quote\" icon=\"format_quote\" />\n        <BlockButton format=\"numbered-list\" icon=\"format_list_numbered\" />\n        <BlockButton format=\"bulleted-list\" icon=\"format_list_bulleted\" />\n      </Toolbar>\n      <Editable\n        renderElement={renderElement}\n        renderLeaf={renderLeaf}\n        placeholder=\"Enter some rich text…\"\n        spellCheck\n        autoFocus\n        onKeyDown={event => {\n          for (const hotkey in HOTKEYS) {\n            if (isHotkey(hotkey, event as any)) {\n              event.preventDefault()\n              const mark = HOTKEYS[hotkey]\n              toggleMark(editor, mark)\n            }\n          }\n        }}\n      />\n    </Slate>\n  )\n}\n\nconst toggleBlock = (editor, format) => {\n  const isActive = isBlockActive(editor, format)\n  const isList = LIST_TYPES.includes(format)\n\n  Transforms.unwrapNodes(editor, {\n    match: n => LIST_TYPES.includes(n.type as string),\n    split: true,\n  })\n\n  Transforms.setNodes(editor, {\n    type: isActive ? 'paragraph' : isList ? 'list-item' : format,\n  })\n\n  if (!isActive && isList) {\n    const block = { type: format, children: [] }\n    Transforms.wrapNodes(editor, block)\n  }\n}\n\nconst toggleMark = (editor, format) => {\n  const isActive = isMarkActive(editor, format)\n\n  if (isActive) {\n    Editor.removeMark(editor, format)\n  } else {\n    Editor.addMark(editor, format, true)\n  }\n}\n\nconst isBlockActive = (editor, format) => {\n  const [match] = Editor.nodes(editor, {\n    match: n => n.type === format,\n  })\n\n  return !!match\n}\n\nconst isMarkActive = (editor, format) => {\n  const marks = Editor.marks(editor)\n  return marks ? marks[format] === true : false\n}\n\nconst Element = ({ attributes, children, element }) => {\n  switch (element.type) {\n    case 'block-quote':\n      return <blockquote {...attributes}>{children}</blockquote>\n    case 'bulleted-list':\n      return <ul {...attributes}>{children}</ul>\n    case 'heading-one':\n      return <h1 {...attributes}>{children}</h1>\n    case 'heading-two':\n      return <h2 {...attributes}>{children}</h2>\n    case 'list-item':\n      return <li {...attributes}>{children}</li>\n    case 'numbered-list':\n      return <ol {...attributes}>{children}</ol>\n    default:\n      return <p {...attributes}>{children}</p>\n  }\n}\n\nconst Leaf = ({ attributes, children, leaf }) => {\n  if (leaf.bold) {\n    children = <strong>{children}</strong>\n  }\n\n  if (leaf.code) {\n    children = <code>{children}</code>\n  }\n\n  if (leaf.italic) {\n    children = <em>{children}</em>\n  }\n\n  if (leaf.underline) {\n    children = <u>{children}</u>\n  }\n\n  return <span {...attributes}>{children}</span>\n}\n\nconst BlockButton = ({ format, icon }) => {\n  const editor = useSlate()\n  return (\n    <Button\n      active={isBlockActive(editor, format)}\n      onMouseDown={event => {\n        event.preventDefault()\n        toggleBlock(editor, format)\n      }}\n    >\n      <Icon>{icon}</Icon>\n    </Button>\n  )\n}\n\nconst MarkButton = ({ format, icon }) => {\n  const editor = useSlate()\n  return (\n    <Button\n      active={isMarkActive(editor, format)}\n      onMouseDown={event => {\n        event.preventDefault()\n        toggleMark(editor, format)\n      }}\n    >\n      <Icon>{icon}</Icon>\n    </Button>\n  )\n}\n\nconst initialValue = [\n  {\n    type: 'paragraph',\n    children: [\n      { text: 'This is editable ' },\n      { text: 'rich', bold: true },\n      { text: ' text, ' },\n      { text: 'much', italic: true },\n      { text: ' better than a ' },\n      { text: '<textarea>', code: true },\n      { text: '!' },\n    ],\n  },\n  {\n    type: 'paragraph',\n    children: [\n      {\n        text:\n          \"Since it's rich text, you can do things like turn a selection of text \",\n      },\n      { text: 'bold', bold: true },\n      {\n        text:\n          ', or add a semantically rendered block quote in the middle of the page, like this:',\n      },\n    ],\n  },\n  {\n    type: 'block-quote',\n    children: [{ text: 'A wise quote.' }],\n  },\n  {\n    type: 'paragraph',\n    children: [{ text: 'Try it out for yourself!' }],\n  },\n]\n\nexport default RichTextExample\n"]},"metadata":{},"sourceType":"module"}