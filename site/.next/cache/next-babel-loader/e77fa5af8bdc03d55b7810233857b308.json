{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/yonggu/WebstormProjects/gyedit/site/examples/gyedit.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useMemo, useState } from 'react';\nimport isHotkey from 'is-hotkey';\nimport { Editable, withReact, useSlate, Slate } from 'slate-react';\nimport { Editor, Transforms, createEditor } from 'slate';\nimport { withHistory } from 'slate-history';\nimport { Button, Icon, Toolbar } from '../components';\nimport { withMarkdown, onKeyDown as _onKeyDown, Element, Leaf } from '../../src/'; // import '../pages/index.scss'\n\nvar HOTKEYS = {\n  'mod+b': 'bold',\n  'mod+i': 'italic',\n  'mod+u': 'underline',\n  'mod+`': 'code'\n};\nvar LIST_TYPES = ['numbered-list', 'bulleted-list'];\n\nvar GYEdit = function GYEdit() {\n  _s();\n\n  var _useState = useState(initialValue),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var editor = useMemo(function () {\n    return withMarkdown(withHistory(withReact(createEditor())));\n  }, []);\n  var renderElement = useCallback(function (props) {\n    return __jsx(Element, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 48\n      }\n    }));\n  }, []);\n  var renderLeaf = useCallback(function (props) {\n    return __jsx(Leaf, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 45\n      }\n    }));\n  }, []);\n  return __jsx(Slate, {\n    editor: editor,\n    value: value,\n    onChange: function onChange(value) {\n      return setValue(value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }, __jsx(Toolbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 13\n    }\n  }, __jsx(MarkButton, {\n    format: \"bold\",\n    icon: \"format_bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 17\n    }\n  }), __jsx(MarkButton, {\n    format: \"italic\",\n    icon: \"format_italic\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 17\n    }\n  }), __jsx(MarkButton, {\n    format: \"underline\",\n    icon: \"format_underlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 17\n    }\n  }), __jsx(MarkButton, {\n    format: \"code\",\n    icon: \"code\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 17\n    }\n  }), __jsx(BlockButton, {\n    format: \"heading-one\",\n    icon: \"looks_one\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 17\n    }\n  }), __jsx(BlockButton, {\n    format: \"heading-two\",\n    icon: \"looks_two\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 17\n    }\n  }), __jsx(BlockButton, {\n    format: \"block-quote\",\n    icon: \"format_quote\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 17\n    }\n  }), __jsx(BlockButton, {\n    format: \"numbered-list\",\n    icon: \"format_list_numbered\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  }), __jsx(BlockButton, {\n    format: \"bulleted-list\",\n    icon: \"format_list_bulleted\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  })), __jsx(Editable, {\n    renderElement: renderElement,\n    renderLeaf: renderLeaf,\n    placeholder: \"Enter some rich text\\u2026\",\n    spellCheck: true,\n    autoFocus: true,\n    onKeyDown: function onKeyDown(event) {\n      var done = false;\n\n      for (var hotkey in HOTKEYS) {\n        if (isHotkey(hotkey, event)) {\n          event.preventDefault();\n          var mark = HOTKEYS[hotkey];\n          toggleMark(editor, mark);\n          done = true;\n        }\n      }\n\n      if (!done) {\n        _onKeyDown()(event, editor);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }));\n};\n\n_s(GYEdit, \"hBKkTYc2ZL6rkk2cMo/rVM1L/YY=\");\n\n_c = GYEdit;\n\nvar toggleBlock = function toggleBlock(editor, format) {\n  var isActive = isBlockActive(editor, format);\n  var isList = LIST_TYPES.includes(format);\n  Transforms.unwrapNodes(editor, {\n    match: function match(n) {\n      return LIST_TYPES.includes(n.type);\n    },\n    split: true\n  });\n  Transforms.setNodes(editor, {\n    type: isActive ? 'paragraph' : isList ? 'list-item' : format\n  });\n\n  if (!isActive && isList) {\n    var block = {\n      type: format,\n      children: []\n    };\n    Transforms.wrapNodes(editor, block);\n  }\n};\n\nvar toggleMark = function toggleMark(editor, format) {\n  var isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n};\n\nvar isBlockActive = function isBlockActive(editor, format) {\n  var _Editor$nodes = Editor.nodes(editor, {\n    match: function match(n) {\n      return n.type === format;\n    }\n  }),\n      _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n      match = _Editor$nodes2[0];\n\n  return !!match;\n};\n\nvar isMarkActive = function isMarkActive(editor, format) {\n  var marks = Editor.marks(editor);\n  return marks ? marks[format] === true : false;\n};\n\nvar BlockButton = function BlockButton(_ref) {\n  _s2();\n\n  var format = _ref.format,\n      icon = _ref.icon;\n  var editor = useSlate();\n  return __jsx(Button, {\n    active: isBlockActive(editor, format),\n    onMouseDown: function onMouseDown(event) {\n      event.preventDefault();\n      toggleBlock(editor, format);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, icon));\n};\n\n_s2(BlockButton, \"YMFVEh3YGumTkrWAgpqmxHJ20Oc=\", false, function () {\n  return [useSlate];\n});\n\n_c2 = BlockButton;\n\nvar MarkButton = function MarkButton(_ref2) {\n  _s3();\n\n  var format = _ref2.format,\n      icon = _ref2.icon;\n  var editor = useSlate();\n  return __jsx(Button, {\n    active: isMarkActive(editor, format),\n    onMouseDown: function onMouseDown(event) {\n      event.preventDefault();\n      toggleMark(editor, format);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, icon));\n};\n\n_s3(MarkButton, \"YMFVEh3YGumTkrWAgpqmxHJ20Oc=\", false, function () {\n  return [useSlate];\n});\n\n_c3 = MarkButton;\nvar initialValue = [{\n  type: 'numbered-list',\n  start: 1,\n  children: [{\n    type: 'list-item',\n    children: [{\n      text: \"haha\"\n    }]\n  }]\n}, {\n  type: 'bulleted-list',\n  start: 2,\n  children: [{\n    type: 'list-item',\n    children: [{\n      text: \"hello\"\n    }]\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: 'This is editable '\n  }, {\n    text: 'rich',\n    bold: true\n  }, {\n    text: ' text, '\n  }, {\n    text: 'much',\n    italic: true\n  }, {\n    text: ' better than a '\n  }, {\n    text: '<textarea>',\n    code: true\n  }, {\n    text: '!'\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: \"Since it's rich text, you can do things like turn a selection of text \"\n  }, {\n    text: 'bold',\n    bold: true\n  }, {\n    text: ', or add a semantically rendered block quote in the middle of the page, like this:'\n  }]\n}, {\n  type: 'block-quote',\n  children: [{\n    type: 'paragraph',\n    children: [{\n      text: 'A wise quote.'\n    }]\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: 'Try it out for yourself!'\n  }]\n}];\nexport default GYEdit;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GYEdit\");\n$RefreshReg$(_c2, \"BlockButton\");\n$RefreshReg$(_c3, \"MarkButton\");","map":{"version":3,"sources":["/Users/yonggu/WebstormProjects/gyedit/site/examples/gyedit.tsx"],"names":["React","useCallback","useMemo","useState","isHotkey","Editable","withReact","useSlate","Slate","Editor","Transforms","createEditor","withHistory","Button","Icon","Toolbar","withMarkdown","onKeyDown","Element","Leaf","HOTKEYS","LIST_TYPES","GYEdit","initialValue","value","setValue","editor","renderElement","props","renderLeaf","event","done","hotkey","preventDefault","mark","toggleMark","toggleBlock","format","isActive","isBlockActive","isList","includes","unwrapNodes","match","n","type","split","setNodes","block","children","wrapNodes","isMarkActive","removeMark","addMark","nodes","marks","BlockButton","icon","MarkButton","start","text","bold","italic","code"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react'\nimport isHotkey from 'is-hotkey'\nimport {Editable, withReact, useSlate, Slate, ReactEditor} from 'slate-react'\nimport { Editor, Transforms, createEditor, Node } from 'slate'\nimport { withHistory } from 'slate-history'\n\nimport { Button, Icon, Toolbar } from '../components'\nimport { withMarkdown, onKeyDown, Element, Leaf } from '../../src/'\n\n// import '../pages/index.scss'\n\nconst HOTKEYS = {\n    'mod+b': 'bold',\n    'mod+i': 'italic',\n    'mod+u': 'underline',\n    'mod+`': 'code',\n}\n\nconst LIST_TYPES = ['numbered-list', 'bulleted-list']\n\nconst GYEdit = () => {\n    const [value, setValue] = useState<Node[]>(initialValue)\n    const editor = useMemo(() => withMarkdown(withHistory(withReact(createEditor()))), [])\n    const renderElement = useCallback(props => <Element {...props} />, [])\n    const renderLeaf = useCallback(props => <Leaf {...props} />, [])\n    return (\n        <Slate editor={editor as ReactEditor} value={value} onChange={value => setValue(value)}>\n            <Toolbar>\n                <MarkButton format=\"bold\" icon=\"format_bold\" />\n                <MarkButton format=\"italic\" icon=\"format_italic\" />\n                <MarkButton format=\"underline\" icon=\"format_underlined\" />\n                <MarkButton format=\"code\" icon=\"code\" />\n                <BlockButton format=\"heading-one\" icon=\"looks_one\" />\n                <BlockButton format=\"heading-two\" icon=\"looks_two\" />\n                <BlockButton format=\"block-quote\" icon=\"format_quote\" />\n                <BlockButton format=\"numbered-list\" icon=\"format_list_numbered\" />\n                <BlockButton format=\"bulleted-list\" icon=\"format_list_bulleted\" />\n            </Toolbar>\n            <Editable\n                renderElement={renderElement}\n                renderLeaf={renderLeaf}\n                placeholder=\"Enter some rich text…\"\n                spellCheck\n                autoFocus\n                onKeyDown={event => {\n                    let done:boolean = false\n                    for (const hotkey in HOTKEYS) {\n                        if (isHotkey(hotkey, event as any)) {\n                            event.preventDefault()\n                            const mark = HOTKEYS[hotkey]\n                            toggleMark(editor, mark)\n                            done = true\n                        }\n                    }\n                    if (!done){\n                        onKeyDown()(event, editor)\n                    }\n                }}\n            />\n        </Slate>\n    )\n}\n\nconst toggleBlock = (editor, format) => {\n    const isActive = isBlockActive(editor, format)\n    const isList = LIST_TYPES.includes(format)\n\n    Transforms.unwrapNodes(editor, {\n        match: n => LIST_TYPES.includes(n.type as string),\n        split: true,\n    })\n\n    Transforms.setNodes(editor, {\n        type: isActive ? 'paragraph' : isList ? 'list-item' : format,\n    })\n\n    if (!isActive && isList) {\n        const block = { type: format, children: [] }\n        Transforms.wrapNodes(editor, block)\n    }\n}\n\nconst toggleMark = (editor, format) => {\n    const isActive = isMarkActive(editor, format)\n\n    if (isActive) {\n        Editor.removeMark(editor, format)\n    } else {\n        Editor.addMark(editor, format, true)\n    }\n}\n\nconst isBlockActive = (editor, format) => {\n    const [match] = Editor.nodes(editor, {\n        match: n => n.type === format,\n    })\n\n    return !!match\n}\n\nconst isMarkActive = (editor, format) => {\n    const marks = Editor.marks(editor)\n    return marks ? marks[format] === true : false\n}\n\n\n\nconst BlockButton = ({ format, icon }) => {\n    const editor = useSlate()\n    return (\n        <Button\n            active={isBlockActive(editor, format)}\n            onMouseDown={event => {\n                event.preventDefault()\n                toggleBlock(editor, format)\n            }}\n        >\n            <Icon>{icon}</Icon>\n        </Button>\n    )\n}\n\nconst MarkButton = ({ format, icon }) => {\n    const editor = useSlate()\n    return (\n        <Button\n            active={isMarkActive(editor, format)}\n            onMouseDown={event => {\n                event.preventDefault()\n                toggleMark(editor, format)\n            }}\n        >\n            <Icon>{icon}</Icon>\n        </Button>\n    )\n}\n\nconst initialValue = [\n    {\n        type:'numbered-list',\n        start:1,\n        children:[\n            {type:'list-item',children:[\n                    {text:\"haha\"}\n                ]}\n        ]\n    },\n    {\n        type:'bulleted-list',\n        start: 2,\n        children:[\n            {type:'list-item',children:[{text:\"hello\"}]}\n        ]\n    },\n    {\n        type: 'paragraph',\n        children: [\n            { text: 'This is editable ' },\n            { text: 'rich', bold: true },\n            { text: ' text, ' },\n            { text: 'much', italic: true },\n            { text: ' better than a ' },\n            { text: '<textarea>', code: true },\n            { text: '!' },\n        ],\n    },\n    {\n        type: 'paragraph',\n        children: [\n            {\n                text:\n                    \"Since it's rich text, you can do things like turn a selection of text \",\n            },\n            { text: 'bold', bold: true },\n            {\n                text:\n                    ', or add a semantically rendered block quote in the middle of the page, like this:',\n            },\n        ],\n    },\n    {\n        type: 'block-quote',\n        children: [{type:'paragraph', children:[{ text: 'A wise quote.' }]}],\n    },\n    {\n        type: 'paragraph',\n        children: [{ text: 'Try it out for yourself!' }],\n    },\n]\n\nexport default GYEdit\n"]},"metadata":{},"sourceType":"module"}